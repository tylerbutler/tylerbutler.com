---
import Navigation from "./Navigation.astro";
import ThemeToggle from "./ThemeToggle.astro";
import SocialIconsBelow from "./SocialIconsBelow.astro";
import headlinesRaw from "../data/headlines.txt?raw";

export interface Props {
  size?: "large" | "small";
}

const { size = "large" } = Astro.props;

const headlines = headlinesRaw.split("\n").filter((line) => line.trim() !== "");
---

<header class="site-header">
  <div class="theme-toggle-wrapper">
    <ThemeToggle/>
  </div>

  <Navigation/>
  <h1>
    <a href="/">Tyler Butler</a>
  </h1>
  <p class="tagline" id="random-headline"></p>

  <SocialIconsBelow/>
</header>

<script define:vars={{ headlines }}>
  const taglineElement = document.getElementById("random-headline");
  if (taglineElement) {
    const randomHeadline =
      headlines[Math.floor(Math.random() * headlines.length)];
    taglineElement.textContent = randomHeadline + "\u00A0"; // \u00A0 is &nbsp;
  }
</script>

<style>
  .site-header {
    position: relative;
    /* Reduce top and bottom padding */
    padding-top: 25px !important;
    padding-bottom: 20px !important;
  }

  .theme-toggle-wrapper {
    position: absolute;
    top: 8px;
    right: 8px;
    z-index: 10;
  }

  /* Reduce spacing between nav and title */
  .site-header :global(nav) {
    margin-bottom: 5px !important;
  }

  /* Reduce spacing for title */
  .site-header h1 {
    margin-top: 0px !important;
    margin-bottom: 3px !important;
  }

  /* Screen reader only text */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
</style>
